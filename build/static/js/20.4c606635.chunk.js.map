{"version":3,"sources":["constants/ApiConstant.js","views/auth-views/components/LoginForm.js","views/auth-views/authentication/login/index.js"],"names":["API_BASE_URL","SERVER_URL","LoginForm","props","history","useHistory","useState","loadingLogin","setloadingLogin","hideAuthMessage","extra","loading","showMessage","message","token","redirect","allowRedirect","useEffect","push","setTimeout","forgetPassword","className","onClick","disabled","div","initial","opacity","marginBottom","animate","type","showIcon","layout","name","onFinish","values","url","data","email","password","axios","post","then","response","defaults","headers","common","message2","success","localStorage","setItem","user","id","role","status","window","location","reload","catch","error","Item","label","rules","required","prefix","MailOutlined","Password","LockOutlined","htmlType","block","defaultProps","otherSignIn","showForgetPassword","mapDispatchToProps","showAuthMessage","showLoading","authenticated","connect","auth","backgroundStyle","backgroundImage","backgroundRepeat","backgroundSize","LoginOne","theme","useSelector","state","currentTheme","getItem","style","justify","xs","sm","md","lg","src","alt","href","Login"],"mappings":"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","file":"static/js/20.4c606635.chunk.js","sourcesContent":["export const API_BASE_URL = 'http://127.0.0.1:3501/api/'\r\nexport const SERVER_URL = 'http://127.0.0.1:3501/'","import React, { useEffect, useState } from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport { Button, Form, Input, Alert, Divider, message as message2} from \"antd\";\r\nimport { MailOutlined, LockOutlined } from '@ant-design/icons';\r\nimport PropTypes from 'prop-types';\r\nimport {  \r\n\tshowLoading, \r\n\tshowAuthMessage, \r\n\thideAuthMessage,\r\n\tauthenticated\r\n} from 'redux/actions/Auth';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\"\r\nimport {API_BASE_URL} from '../../../constants/ApiConstant'\r\nimport axios from 'axios';\r\n\r\nexport const LoginForm = (props) => {\r\n\tlet history = useHistory();\r\n\tconst [loadingLogin, setloadingLogin] = useState(false)\r\n\r\n\tconst { \r\n\t\thideAuthMessage,\r\n\t\textra,\r\n\t\tloading,\r\n\t\tshowMessage,\r\n\t\tmessage,\r\n\t\ttoken,\r\n\t\tredirect,\r\n\t\tallowRedirect\r\n\t} = props\r\n\r\n\tconst pushToAdminHome = () => {\r\n\t\thistory.push('/admin/home');\r\n\t\twindow.location.reload();\r\n\t}\r\n\r\n\tconst pushToClientHome = () => {\r\n\t\thistory.push('/client/home');\r\n\t\twindow.location.reload();\r\n\t}\r\n\r\n\tconst onLogin = values => {\r\n\t\t//   setloadingLogin(true);\r\n\t\t  var url = API_BASE_URL + 'login';\r\n\t  \r\n\t\t  var data = {\r\n\t\t\t\"email\": values.email,\t\r\n\t\t\t\"password\": values.password,\t\r\n\t\t  };\r\n\t  \r\n\t\t  axios.post(url, data, {}).then(response => {\r\n\r\n\t\t\tsetloadingLogin(false);\r\n\r\n\t\t\taxios.defaults.headers.common['Authorization'] = 'Bearer '+ response.data.token.token;\r\n\t\t\tmessage2.success(`Logged In Successfully!`);\r\n\t\t\tlocalStorage.setItem(\"token\", response.data.token.token);\r\n\t\t\tlocalStorage.setItem(\"id\", response.data.user.id);\r\n\t\t\tlocalStorage.setItem(\"email\", response.data.user.email);\r\n\t\t\tlocalStorage.setItem(\"name\", response.data.user.name);\r\n\t\t\tlocalStorage.setItem(\"role\", response.data.user.role);\r\n\t\t\tlocalStorage.setItem(\"status\", response.data.user.status);\r\n\t\t\t\r\n\t\t\tif(+response.data.user.role===0) {\r\n\t\t\t\tpushToAdminHome()\r\n\t\t\t} else {\r\n\t\t\t\tpushToClientHome()\r\n\t\t\t} \r\n\t\t  })\r\n\t\t  .catch(error => {\r\n\t\t\tif(error.response) {\r\n\t\t\t  if(error.response.data) {\r\n\t\t\t\tif(error.response.data===\"Invalid credentials\") {\r\n\t\t\t\t  message2.error(\"Invalid credentials!\");\r\n\t\t\t\t  return false;\r\n\t\t\t\t}\r\n\t\t\t\tif(error.response.data.error) {\r\n\t\t\t\t  message2.error(error.response.data.error);\r\n\t\t\t\t} else {\r\n\t\t\t\t  message2.error(\"Something went wrong!\");\r\n\t\t\t\t}\r\n\t\t\t  } else {\r\n\t\t\t\tmessage2.error(\"Something went wrong!\");\r\n\t\t\t  }\r\n\t\t\t} else {\r\n\t\t\t  message2.error(\"Something went wrong!\");\r\n\t\t\t}\r\n\t\t  });\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (token !== null && allowRedirect) {\r\n\t\t\thistory.push(redirect)\r\n\t\t}\r\n\t\tif(showMessage) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\thideAuthMessage();\r\n\t\t}, 3000);\r\n\t\t}\r\n\t});\r\n\r\n\t\r\n\tconst forgetPassword = (\r\n\t\t<div>\r\n\t\t\t<Divider>\r\n\t\t\t\t<span className=\"text-muted font-size-base font-weight-normal\">or</span>\r\n\t\t\t</Divider>\r\n\t\t\t<div className=\"d-flex justify-content-center\">\r\n\t\t\t\t\r\n\t\t\t\t<Button \r\n\t\t\t\t\tonClick={() => history.push(`/auth/forgot-password`)}\r\n\t\t\t\t\tclassName=\"mr-2 w-100\" \r\n\t\t\t\t\tdisabled={loading} \r\n\t\t\t\t>\r\n\t\t\t\t\tForget Password\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<motion.div \r\n\t\t\t\tinitial={{ opacity: 0, marginBottom: 0 }} \r\n\t\t\t\tanimate={{ \r\n\t\t\t\t\topacity: showMessage ? 1 : 0,\r\n\t\t\t\t\tmarginBottom: showMessage ? 20 : 0 \r\n\t\t\t\t}}> \r\n\t\t\t\t<Alert type=\"error\" showIcon message={message}></Alert>\r\n\t\t\t</motion.div>\r\n\t\t\t<Form \r\n\t\t\t\tlayout=\"vertical\" \r\n\t\t\t\tname=\"login-form\"\r\n\t\t\t\tonFinish={onLogin}\r\n\t\t\t>\r\n\t\t\t\t<Form.Item \r\n\t\t\t\t\tname=\"email\" \r\n\t\t\t\t\tlabel=\"Email\" \r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Please input your email',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\ttype: 'email',\r\n\t\t\t\t\t\t\tmessage: 'Please enter a validate email!'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input prefix={<MailOutlined className=\"text-primary\" />}/>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item \r\n\t\t\t\t\tname=\"password\" \r\n\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t<div className={`d-flex justify-content-between w-100 align-items-center`}>\r\n\t\t\t\t\t\t\t<span>Password</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t} \r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Please input your password',\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Input.Password prefix={<LockOutlined className=\"text-primary\" />}/>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" block loading={loadingLogin}>\r\n\t\t\t\t\t\tSign In\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t{/* {\r\n\t\t\t\t\totherSignIn ? renderOtherSignIn : null\r\n\t\t\t\t} */}\r\n\t\t\t\t{forgetPassword}\r\n\t\t\t\t{ extra }\r\n\t\t\t</Form>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nLoginForm.propTypes = {\r\n\totherSignIn: PropTypes.bool,\r\n\tshowForgetPassword: PropTypes.bool,\r\n\textra: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.element\r\n\t]),\r\n};\r\n\r\nLoginForm.defaultProps = {\r\n\totherSignIn: true,\r\n\tshowForgetPassword: false\r\n};\r\n\r\nconst mapStateToProps = ({auth}) => {\r\n\tconst {loading, message, showMessage, token, redirect} = auth;\r\n  \treturn {loading, message, showMessage, token, redirect}\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\tshowAuthMessage,\r\n\tshowLoading,\r\n\thideAuthMessage,\r\n\tauthenticated\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm)\r\n","import React ,{useEffect} from 'react'\r\nimport LoginForm from '../../components/LoginForm'\r\nimport { Card, Row, Col } from \"antd\";\r\nimport { useSelector } from 'react-redux';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst backgroundStyle = {\r\n\tbackgroundImage: 'url(/img/others/img-17.jpg)',\r\n\tbackgroundRepeat: 'no-repeat',\r\n\tbackgroundSize: 'cover'\r\n}\r\n\r\nconst LoginOne = props => {\r\n\tconst theme = useSelector(state => state.theme.currentTheme)\r\n\r\n\tlet history = useHistory();\r\n\r\n\tuseEffect(()=>{\r\n\t\tvar token = localStorage.getItem(\"token\"); \r\n\t\tvar role = +localStorage.getItem(\"role\"); \r\n\t\tif(token) {\r\n\t\t  if(role===0) {\r\n\t\t\thistory.push('/admin/home');\r\n\t\t  } else {\r\n\t\t\thistory.push('/client/home');\r\n\t\t  } \r\n\t\t}\r\n\t\t// eslint-disable-next-line\r\n\t},[])\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"h-100\" style={backgroundStyle}>\r\n\t\t\t<div className=\"container d-flex flex-column justify-content-center h-100\">\r\n\t\t\t\t<Row justify=\"center\">\r\n\t\t\t\t\t<Col xs={20} sm={20} md={20} lg={7}>\r\n\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t<div className=\"my-4\">\r\n\t\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t<img className=\"img-fluid\" src={`/img/${theme === 'light' ? 'logo.png': 'logo-white.png'}`} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t<p>Don't have an account yet? <a href=\"/auth/register\">Sign Up</a></p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Row justify=\"center\">\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={20} lg={20}>\r\n\t\t\t\t\t\t\t\t\t\t<LoginForm {...props} />\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst Login = () => {\r\n\treturn (\r\n\t\t<LoginOne allowRedirect={true} />\r\n\t)\r\n}\r\n\r\nexport default Login\r\n"],"sourceRoot":""}