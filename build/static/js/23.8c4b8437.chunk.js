(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[23],{429:function(e,a,s){"use strict";s.r(a);var t=s(15),r=s(0),n=s(69),o=s(36),i=s(376),c=s(403),l=s(431),d=s(418),m=s(228),u=s(422),j=s(366),h=s(70),b=s(406),g=s(49),p=s(40),x=s(393),f=s(112),O=s(111),w=s.n(O),y=s(4),k={email:[{required:!0,message:"Please input your email address"},{type:"email",message:"Please enter a validate email!"}],password:[{required:!0,message:"Please input your password"}],confirm:[{required:!0,message:"Please confirm your password!"},function(e){var a=e.getFieldValue;return{validator:function(e,s){return s&&a("password")!==s?Promise.reject("Passwords do not match!"):Promise.resolve()}}}]},v={showAuthMessage:g.c,hideAuthMessage:g.b,showLoading:g.d,authenticated:g.a},I=Object(o.b)((function(e){var a=e.auth;return{loading:a.loading,message:a.message,showMessage:a.showMessage,token:a.token,redirect:a.redirect}}),v)((function(e){var a=e.token,s=e.loading,t=e.redirect,o=e.message,g=e.showMessage,O=e.hideAuthMessage,v=e.allowRedirect,I=d.a.useForm(),N=Object(n.a)(I,1)[0],P=Object(p.g)();return Object(r.useEffect)((function(){null!==a&&v&&P.push(t),g&&setTimeout((function(){O()}),3e3)})),Object(r.useEffect)((function(){var e=localStorage.getItem("token"),a=localStorage.getItem("role");e&&(0===+a?P.push(["/admin/home"]):P.push(["/client/home"]))}),[P]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(x.a.div,{initial:{opacity:0,marginBottom:0},animate:{opacity:g?1:0,marginBottom:g?20:0},children:Object(y.jsx)(u.a,{type:"error",showIcon:!0,message:o})}),Object(y.jsxs)(d.a,{form:N,layout:"vertical",name:"register-form",onFinish:function(){N.validateFields().then((function(e){if(""===e.name)return m.b.error("Please enter your name!"),!1;if(""===e.email)return m.b.error("Please enter your email!"),!1;if(""===e.password)return m.b.error("Please enter your password!"),!1;var a=f.a+"register",s={name:e.name,email:e.email,username:e.email.substring(0,e.email.lastIndexOf("@")),password:e.password};w.a.post(a,s,{}).then((function(e){w.a.defaults.headers.common.Authorization="Bearer "+e.data.token.token,m.b.success("Account Created Successfully!"),localStorage.setItem("token",e.data.token.token),localStorage.setItem("id",e.data.user.id),localStorage.setItem("email",e.data.user.email),localStorage.setItem("name",e.data.user.name),localStorage.setItem("role",e.data.user.role),localStorage.setItem("status",e.data.user.status),0===+e.data.user.role?(P.push("/admin/home"),window.location.reload()):(P.push("/client/home"),window.location.reload())})).catch((function(e){console.log(e.response),e.response&&("The email must be a valid email address."===e.response.data.email?m.b.error("Invalid Email Address!"):"The email has already been taken."===e.response.data.email?m.b.error("Email Address Already Taken!"):e.response.data.username?m.b.error("Username Already Taken!"):e.response.data.password&&m.b.error("Please use strong password!"))}))})).catch((function(e){console.log("Validate Failed:",e)}))},children:[Object(y.jsx)(d.a.Item,{name:"name",label:"Name",children:Object(y.jsx)(j.a,{prefix:Object(y.jsx)(i.a,{className:"text-primary"})})}),Object(y.jsx)(d.a.Item,{name:"email",label:"Email",rules:k.email,hasFeedback:!0,children:Object(y.jsx)(j.a,{prefix:Object(y.jsx)(c.a,{className:"text-primary"})})}),Object(y.jsx)(d.a.Item,{name:"password",label:"Password",rules:k.password,hasFeedback:!0,children:Object(y.jsx)(j.a.Password,{prefix:Object(y.jsx)(l.a,{className:"text-primary"})})}),Object(y.jsx)(d.a.Item,{children:Object(y.jsx)(h.a,{type:"primary",htmlType:"submit",block:!0,loading:s,children:"Sign Up"})}),Object(y.jsx)(b.a,{children:Object(y.jsx)("span",{className:"text-muted font-size-base font-weight-normal",children:"or"})}),Object(y.jsx)("div",{className:"d-flex justify-content-center",children:Object(y.jsx)(h.a,{onClick:function(){return P.push("/auth/login")},className:"mr-2 w-100",disabled:s,children:"Login"})})]})]})})),N=s(390),P=s(391),S=s(417),A={backgroundImage:"url(/img/others/img-17.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"cover"};a.default=function(e){var a=Object(o.c)((function(e){return e.theme.currentTheme}));return Object(y.jsx)("div",{className:"h-100",style:A,children:Object(y.jsx)("div",{className:"container d-flex flex-column justify-content-center h-100",children:Object(y.jsx)(N.a,{justify:"center",children:Object(y.jsx)(P.a,{xs:20,sm:20,md:20,lg:7,children:Object(y.jsx)(S.a,{children:Object(y.jsxs)("div",{className:"my-2",children:[Object(y.jsxs)("div",{className:"text-center",children:[Object(y.jsx)("img",{className:"img-fluid",src:"/img/".concat("light"===a?"logo.png":"logo-white.png"),alt:""}),Object(y.jsx)("p",{className:"text-muted",children:"Create a new account:"})]}),Object(y.jsx)(N.a,{justify:"center",children:Object(y.jsx)(P.a,{xs:24,sm:24,md:20,lg:20,children:Object(y.jsx)(I,Object(t.a)({},e))})})]})})})})})})}}}]);
//# sourceMappingURL=23.8c4b8437.chunk.js.map