(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[15],{417:function(e,t,s){"use strict";s.r(t);var a=s(64),c=s(376),n=s(15),r=s(0),l=s.n(r),i=s(409),o=s(356),d=s(221),u=s(357),m=s(396),j=s(408),b=s(65),O=s(380),h=s(381),f=s(407),p=s(411),x=s(354),g=s(392),y=s(415),v=s(420),S=s(116),w=s(148),D=s(104),N=s(103),C=s.n(N),A=s(389),k=s(410),I=s(3),R=i.a.Title,E=i.a.Text,L=o.a.TextArea,T=function(e){var t=Object(r.useState)(!1),s=Object(a.a)(t,1)[0];return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(A.a,{style:{top:20},width:620,title:"Payment Request",visible:e.visible,onOk:function(){e.setOrderStatus("Payment Request Generated")},onCancel:function(){e.setVisible(!1)},confirmLoading:s,children:[Object(I.jsx)(R,{level:4,children:"Payment Amount"}),Object(I.jsx)(k.a,{style:{width:"100%"},min:0,max:1e7,defaultValue:1e3,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}}),Object(I.jsx)("div",{className:"mt-4 mb-3",children:Object(I.jsx)(E,{type:"secondary",children:"Please provide other details (if any) that you want client to know."})}),Object(I.jsx)(L,{rows:4})]})})},M=i.a.Title,_=i.a.Text,F=o.a.TextArea;function P(e,t){if("NEW_MESSAGE"===t.type)return e.messages.push(t.message),Object(n.a)({},e);if("ALL_MESSAGES"===t.type){var s=Object(c.a)(t.messages);return e.messages=s,Object(n.a)({},e)}return e}t.default=function(e){var t=Object(r.useState)(!1),s=Object(a.a)(t,2),i=s[0],N=s[1],A=Object(r.useReducer)(P,{messages:[]}),k=Object(a.a)(A,2),R=k[0],E=k[1],L=Object(r.useState)(""),U=Object(a.a)(L,2),G=U[0],q=U[1],z=Object(r.useState)("Order Created"),V=Object(a.a)(z,2),J=V[0],W=V[1],Y=Object(r.useState)(0),$=Object(a.a)(Y,2),B=$[0],H=$[1],K=Object(r.useState)([]),Q=Object(a.a)(K,2),X=Q[0],Z=Q[1],ee=Object(r.useState)([]),te=Object(a.a)(ee,2),se=te[0],ae=te[1],ce=Object(r.useState)([]),ne=Object(a.a)(ce,2),re=ne[0],le=ne[1],ie=Object(r.useState)([]),oe=Object(a.a)(ie,2),de=oe[0],ue=oe[1],me=Object(r.useState)([]),je=Object(a.a)(me,2),be=je[0],Oe=je[1],he=Object(r.useState)([]),fe=Object(a.a)(he,2),pe=fe[0],xe=fe[1],ge=l.a.createRef(),ye=Object(r.useRef)(null);Object(r.useEffect)((function(){Se(e.match.params.id)}),[e.match.params.id]);var ve,Se=function(e){var t=D.a+"get-order",s={id:e};C.a.post(t,s,{}).then((function(e){var t=e.data.form_urls,s=e.data.doc_urls,a=e.data.legalized_urls;Z(t),le(s),Oe(a),W(e.data.status),"Document Submitted"===e.data.status&&H(0),"Document Received"===e.data.status&&H(1),"Payment Request Generated"===e.data.status&&H(2),"Payment Completed"===e.data.status&&H(3),"Sent For Attestation"===e.data.status&&H(4),"Attested Documents Uploaded"===e.data.status&&H(5),"Documents Downloaded"===e.data.status&&H(6),"Order Closed"===e.data.status&&H(7);var c=t.map((function(e){var t=D.b+e;return{name:e.split("uploads/client-docs/")[1],status:"done",url:t}})),n=s.map((function(e){var t=D.b+e;return{name:e.split("uploads/client-docs/")[1],status:"done",url:t}})),r=a.map((function(e){var t=D.b+e;return{name:e.split("uploads/client-docs/")[1],status:"done",url:t}}));ae(c),ue(n),xe(r),q(e.data.details),E({type:"ALL_MESSAGES",messages:e.data.msg_list?e.data.msg_list:[]})})).catch((function(){d.b.error("Something is wrong!")}))},we={name:"file",action:D.a+"upload-order-docs-clients",onChange:function(e){"done"===e.file.status?d.b.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&d.b.error("".concat(e.file.name," file upload failed."));var t=Object(c.a)(e.fileList),s=[];t.forEach((function(e){"done"===e.status&&(e.url?s.push(e.url.split(D.b)[1]):s.push(e.response.url))})),Z(s),ae(t)},showUploadList:{showRemoveIcon:!1}},De={name:"file",action:"".concat(D.a,"upload-order-docs-clients"),onChange:function(e){"done"===e.file.status?d.b.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&d.b.error("".concat(e.file.name," file upload failed."));var t=Object(c.a)(e.fileList),s=[];t.forEach((function(e){"done"===e.status&&(e.url?s.push(e.url.split(D.b)[1]):s.push(e.response.url))})),le(s),ue(t)},showUploadList:{showRemoveIcon:!1}},Ne={name:"file",action:"".concat(D.a,"upload-order-docs-clients"),onChange:function(e){var t=e.file,s=e.fileList;"done"===t.status?d.b.success("".concat(t.name," file uploaded successfully")):"error"===t.status&&d.b.error("".concat(t.name," file upload failed."));var a=Object(c.a)(s),n=[];a.forEach((function(e){"done"===e.status&&(e.url?n.push(e.url.split(D.b)[1]):n.push(e.response.url))})),Oe([].concat(n)),xe(s),"done"===t.status&&ye.current.click()},onRemove:function(){setTimeout((function(){ye.current.click()}),500)}},Ce=function(e){switch(e.msgType){case"text":return Object(I.jsx)("span",{children:e.text});case"image":return Object(I.jsx)("img",{src:e.text,alt:e.text});case"file":return Object(I.jsxs)(w.a,{alignItems:"center",className:"msg-file",children:[Object(I.jsx)(y.a,{className:"font-size-md"}),Object(I.jsx)("span",{className:"ml-2 font-weight-semibold text-link pointer",children:Object(I.jsx)("u",{children:e.text})})]});default:return null}},Ae=function(t){if(t.newMsg){var s={avatar:"",from:localStorage.getItem("id"),msgType:"text",text:t.newMsg,time:""};ge.current.setFieldsValue({newMsg:""}),E({type:"NEW_MESSAGE",message:s});var a=D.a+"send-message-order",n={id:e.match.params.id,msgList:[].concat(Object(c.a)(R.messages),[s])};C.a.post(a,n,{}).then((function(e){})).catch((function(){d.b.error("Something is wrong!")}))}},ke=function(t){var s=D.a+"update-order-status",a={id:e.match.params.id,status:t};C.a.post(s,a,{}).then((function(t){d.b.success("Order updated successfully!"),N(!1),Se(e.match.params.id)}))};return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(O.a,{gutter:16,children:[Object(I.jsx)(h.a,{xs:24,sm:24,md:24,lg:16,children:Object(I.jsxs)(f.a,{title:"Order#2",extra:Object(I.jsxs)(I.Fragment,{children:["Document Submitted"===J&&Object(I.jsx)(b.a,{type:"primary",onClick:function(){return ke("Document Received")},children:"Mark Document Received"}),"Document Received"===J&&Object(I.jsx)(b.a,{type:"primary",onClick:function(){N(!0)},children:"Request Payment"}),"Payment Completed"===J&&Object(I.jsx)(b.a,{type:"primary",onClick:function(){return ke("Sent For Attestation")},children:"Mark as Sent For Attestation"}),"Sent For Attestation"===J&&Object(I.jsx)(b.a,{type:"primary",onClick:function(){return ke("Attested Documents Uploaded")},children:"Mark as Attested Documents Uploaded"}),"Attested Documents Uploaded"===J&&Object(I.jsx)(b.a,{type:"primary",onClick:function(){return ke("Documents Downloaded")},children:"Mark as Documents Downloaded"}),"Documents Downloaded"===J&&Object(I.jsx)(b.a,{type:"primary",onClick:function(){return ke("Order Closed")},children:"Close Order"}),Object(I.jsx)(b.a,{className:"d-none",ref:ye,onClick:function(){var t=D.a+"save-order",s={id:e.match.params.id,form_urls:X,doc_urls:re,legalized_urls:be,details:G};C.a.post(t,s,{}).then((function(t){d.b.success("Order updated successfully!"),Se(e.match.params.id)}))},children:"Save Order"})]}),children:[Object(I.jsx)(T,{visible:i,setVisible:function(e){N(e)},setOrderStatus:ke}),Object(I.jsx)(m.a,{style:{marginTop:0}}),Object(I.jsxs)(O.a,{gutter:16,className:"mt-4",children:[Object(I.jsxs)(h.a,{xs:24,sm:24,md:24,lg:8,children:[Object(I.jsx)(M,{level:4,className:"mb-4",children:"Order Progress"}),Object(I.jsxs)(p.a,{children:[Object(I.jsx)(p.a.Item,{color:"green",children:"Document Submitted"}),Object(I.jsx)(p.a.Item,{color:B>=1?"green":"gray",children:"Document Received"}),Object(I.jsx)(p.a.Item,{color:B>=2?"green":"gray",children:"Payment Request Generated"}),Object(I.jsx)(p.a.Item,{color:B>=3?"green":"gray",children:"Payment Completed"}),Object(I.jsx)(p.a.Item,{color:B>=4?"green":"gray",children:"Sent For Attestation"}),Object(I.jsx)(p.a.Item,{color:B>=5?"green":"gray",children:"Attested Documents Uploaded"}),Object(I.jsx)(p.a.Item,{color:B>=6?"green":"gray",children:"Documents Downloaded"}),Object(I.jsx)(p.a.Item,{color:B>=7?"green":"gray",children:"Order Closed"})]})]}),Object(I.jsxs)(h.a,{xs:24,sm:24,md:24,lg:8,children:[Object(I.jsx)(M,{level:4,className:"mb-4",children:"Your Form"}),Object(I.jsx)(x.a,Object(n.a)(Object(n.a)({},we),{},{fileList:se})),Object(I.jsx)(M,{level:4,className:"mb-4 mt-4",children:"Your Documents"}),Object(I.jsx)(x.a,Object(n.a)(Object(n.a)({},De),{},{fileList:de}))]}),Object(I.jsxs)(h.a,{xs:24,sm:24,md:24,lg:8,children:[Object(I.jsx)(M,{level:4,className:"mb-4",children:"Attested Documents"}),Object(I.jsx)(x.a,Object(n.a)(Object(n.a)({},Ne),{},{fileList:pe,children:Object(I.jsxs)(b.a,{children:[Object(I.jsx)(g.a,{})," Upload"]})}))]})]}),Object(I.jsx)("div",{className:"mb-4",children:Object(I.jsx)(_,{type:"secondary",children:"Other details submitted by user."})}),Object(I.jsx)(F,{style:{cursor:"default"},readOnly:!0,rows:4,value:G})]})}),Object(I.jsx)(h.a,{xs:24,sm:24,md:24,lg:8,children:Object(I.jsx)(f.a,{title:"Chat with us",children:Object(I.jsx)("div",{className:"chat",children:Object(I.jsx)("div",{className:"chat-content",children:Object(I.jsxs)("div",{className:"chat-content",children:[(R.messages,ve=1,Object(I.jsx)("div",{className:"chat-content-body",children:Object(I.jsx)(S.Scrollbars,{children:R.messages&&R.messages.map((function(e,t){return Object(I.jsxs)("div",{className:"msg ".concat("date"===e.msgType?"datetime":""," ").concat(e.from!==localStorage.getItem("id")?"msg-recipient":e.from===localStorage.getItem("id")?"msg-sent":""),children:[e.avatar?Object(I.jsx)("div",{className:"mr-2",children:Object(I.jsx)(u.a,{src:e.avatar})}):null,e.text?Object(I.jsx)("div",{className:"bubble ".concat((e.avatar,"")),children:Object(I.jsx)("div",{className:"bubble-wrapper",children:Ce(e)})}):null,"date"===e.msgType?Object(I.jsx)(m.a,{children:e.time}):null]},"msg-".concat(ve,"-").concat(t))}))})})),Object(I.jsx)("div",{className:"chat-content-footer",children:Object(I.jsx)(j.a,{name:"msgInput",ref:ge,onFinish:Ae,className:"w-100",children:Object(I.jsx)(j.a.Item,{name:"newMsg",className:"mb-0",children:Object(I.jsx)(o.a,{autoComplete:"off",placeholder:"Type a message...",suffix:Object(I.jsx)("div",{className:"d-flex align-items-center",children:Object(I.jsx)(b.a,{shape:"circle",type:"primary",size:"small",onClick:Ae,htmlType:"submit",children:Object(I.jsx)(v.a,{})})})})})})})]})})})})})]})})}}}]);
//# sourceMappingURL=15.7a020f96.chunk.js.map