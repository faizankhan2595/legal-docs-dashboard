{"version":3,"sources":["views/auth-views/components/RegisterForm.js","views/auth-views/authentication/register/index.js"],"names":["rules","email","required","message","type","password","confirm","getFieldValue","validator","rule","value","Promise","reject","resolve","mapDispatchToProps","showAuthMessage","hideAuthMessage","showLoading","authenticated","connect","auth","loading","showMessage","token","redirect","props","allowRedirect","Form","useForm","form","history","useHistory","useEffect","push","setTimeout","localStorage","getItem","role","div","initial","opacity","marginBottom","animate","showIcon","layout","name","onFinish","validateFields","then","values","Toast","error","url","API_BASE_URL","data","username","substring","lastIndexOf","axios","post","response","defaults","headers","common","success","setItem","user","id","status","window","location","reload","catch","console","log","info","Item","label","prefix","UserOutlined","className","hasFeedback","MailOutlined","Password","LockOutlined","htmlType","block","onClick","disabled","backgroundStyle","backgroundImage","backgroundRepeat","backgroundSize","RegisterOne","theme","useSelector","state","currentTheme","style","justify","xs","sm","md","lg","src","alt"],"mappings":"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","file":"static/js/23.f6ddeb0b.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { LockOutlined, MailOutlined, UserOutlined } from \"@ant-design/icons\";\r\nimport { Button, Form, Input, Alert, Divider, message as Toast } from \"antd\";\r\nimport {\r\n  showAuthMessage,\r\n  showLoading,\r\n  hideAuthMessage,\r\n  authenticated,\r\n} from \"redux/actions/Auth\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport { API_BASE_URL } from \"../../../constants/ApiConstant\";\r\nimport axios from \"axios\";\r\n\r\nconst rules = {\r\n  email: [\r\n    {\r\n      required: true,\r\n      message: \"Please input your email address\",\r\n    },\r\n    {\r\n      type: \"email\",\r\n      message: \"Please enter a validate email!\",\r\n    },\r\n  ],\r\n  password: [\r\n    {\r\n      required: true,\r\n      message: \"Please input your password\",\r\n    },\r\n  ],\r\n  confirm: [\r\n    {\r\n      required: true,\r\n      message: \"Please confirm your password!\",\r\n    },\r\n    ({ getFieldValue }) => ({\r\n      validator(rule, value) {\r\n        if (!value || getFieldValue(\"password\") === value) {\r\n          return Promise.resolve();\r\n        }\r\n        return Promise.reject(\"Passwords do not match!\");\r\n      },\r\n    }),\r\n  ],\r\n};\r\n\r\nexport const RegisterForm = (props) => {\r\n  const {\r\n    token,\r\n    loading,\r\n    redirect,\r\n    message,\r\n    showMessage,\r\n    hideAuthMessage,\r\n    allowRedirect,\r\n  } = props;\r\n  const [form] = Form.useForm();\r\n  let history = useHistory();\r\n\r\n  const pushToAdminHome = () => {\r\n    history.push(\"/admin/home\");\r\n    window.location.reload();\r\n  };\r\n\r\n  const pushToClientHome = () => {\r\n    history.push(\"/client/home\");\r\n    window.location.reload();\r\n  };\r\n\r\n  const onSignUp = () => {\r\n    form\r\n      .validateFields()\r\n      .then((values) => {\r\n        if (values.name === \"\") {\r\n          Toast.error(`Please enter your name!`);\r\n          return false;\r\n        }\r\n\r\n        if (values.email === \"\") {\r\n          Toast.error(`Please enter your email!`);\r\n          return false;\r\n        }\r\n\r\n        if (values.password === \"\") {\r\n          Toast.error(`Please enter your password!`);\r\n          return false;\r\n        }\r\n\r\n        var url = API_BASE_URL + `register`;\r\n\r\n        var data = {\r\n          name: values.name,\r\n          email: values.email,\r\n          username: values.email.substring(0, values.email.lastIndexOf(\"@\")),\r\n          password: values.password,\r\n        };\r\n\r\n        axios\r\n          .post(url, data, {})\r\n          .then((response) => {\r\n            axios.defaults.headers.common[\"Authorization\"] =\r\n              \"Bearer \" + response.data.token.token;\r\n\r\n            Toast.success(`Account Created Successfully!`);\r\n            localStorage.setItem(\"token\", response.data.token.token);\r\n            localStorage.setItem(\"id\", response.data.user.id);\r\n            localStorage.setItem(\"email\", response.data.user.email);\r\n            localStorage.setItem(\"name\", response.data.user.name);\r\n            localStorage.setItem(\"role\", response.data.user.role);\r\n            localStorage.setItem(\"status\", response.data.user.status);\r\n\r\n            if (+response.data.user.role === 0) {\r\n              pushToAdminHome();\r\n            } else {\r\n              pushToClientHome();\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            console.log(error.response);\r\n            if (error.response) {\r\n              if (\r\n                error.response.data.email ===\r\n                \"The email must be a valid email address.\"\r\n              ) {\r\n                Toast.error(`Invalid Email Address!`);\r\n              } else if (\r\n                error.response.data.email ===\r\n                \"The email has already been taken.\"\r\n              ) {\r\n                Toast.error(`Email Address Already Taken!`);\r\n              } else if (error.response.data.username) {\r\n                Toast.error(`Username Already Taken!`);\r\n              } else if (error.response.data.password) {\r\n                Toast.error(`Please use strong password!`);\r\n              }\r\n            }\r\n          });\r\n      })\r\n      .catch((info) => {\r\n        console.log(\"Validate Failed:\", info);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (token !== null && allowRedirect) {\r\n      history.push(redirect);\r\n    }\r\n    if (showMessage) {\r\n      setTimeout(() => {\r\n        hideAuthMessage();\r\n      }, 3000);\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    var token = localStorage.getItem(\"token\");\r\n    var role = localStorage.getItem(\"role\");\r\n    if (token) {\r\n      if (+role === 0) {\r\n        history.push([\"/admin/home\"]);\r\n      } else {\r\n        history.push([\"/client/home\"]);\r\n      }\r\n    }\r\n  }, [history]);\r\n\r\n  return (\r\n    <>\r\n      <motion.div\r\n        initial={{ opacity: 0, marginBottom: 0 }}\r\n        animate={{\r\n          opacity: showMessage ? 1 : 0,\r\n          marginBottom: showMessage ? 20 : 0,\r\n        }}\r\n      >\r\n        <Alert type=\"error\" showIcon message={message}></Alert>\r\n      </motion.div>\r\n      <Form\r\n        form={form}\r\n        layout=\"vertical\"\r\n        name=\"register-form\"\r\n        onFinish={onSignUp}\r\n      >\r\n        <Form.Item name=\"name\" label=\"Name\">\r\n          <Input prefix={<UserOutlined className=\"text-primary\" />} />\r\n        </Form.Item>\r\n\r\n        <Form.Item name=\"email\" label=\"Email\" rules={rules.email} hasFeedback>\r\n          <Input prefix={<MailOutlined className=\"text-primary\" />} />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"password\"\r\n          label=\"Password\"\r\n          rules={rules.password}\r\n          hasFeedback\r\n        >\r\n          <Input.Password prefix={<LockOutlined className=\"text-primary\" />} />\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\" block loading={loading}>\r\n            Sign Up\r\n          </Button>\r\n        </Form.Item>\r\n\r\n        <Divider>\r\n          <span className=\"text-muted font-size-base font-weight-normal\">\r\n            or\r\n          </span>\r\n        </Divider>\r\n        <div className=\"d-flex justify-content-center\">\r\n          <Button\r\n            onClick={() => history.push(`/auth/login`)}\r\n            className=\"mr-2 w-100\"\r\n            disabled={loading}\r\n          >\r\n            Login\r\n          </Button>\r\n        </div>\r\n      </Form>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  const { loading, message, showMessage, token, redirect } = auth;\r\n  return { loading, message, showMessage, token, redirect };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  showAuthMessage,\r\n  hideAuthMessage,\r\n  showLoading,\r\n  authenticated,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RegisterForm);\r\n","import React from 'react'\r\nimport RegisterForm from '../../components/RegisterForm'\r\nimport { Card, Row, Col } from \"antd\";\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst backgroundStyle = {\r\n\tbackgroundImage: 'url(/img/others/img-17.jpg)',\r\n\tbackgroundRepeat: 'no-repeat',\r\n\tbackgroundSize: 'cover'\r\n}\r\n\r\nconst RegisterOne = props => {\r\n\tconst theme = useSelector(state => state.theme.currentTheme)\r\n\treturn (\r\n\t\t<div className=\"h-100\" style={backgroundStyle}>\r\n\t\t\t<div className=\"container d-flex flex-column justify-content-center h-100\">\r\n\t\t\t\t<Row justify=\"center\">\r\n\t\t\t\t\t<Col xs={20} sm={20} md={20} lg={7}>\r\n\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t<div className=\"my-2\">\r\n\t\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t<img className=\"img-fluid\" src={`/img/${theme === 'light' ? 'logo.png': 'logo-white.png'}`} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-muted\">Create a new account:</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Row justify=\"center\">\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={20} lg={20}>\r\n\t\t\t\t\t\t\t\t\t\t<RegisterForm {...props}/>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default RegisterOne\r\n"],"sourceRoot":""}